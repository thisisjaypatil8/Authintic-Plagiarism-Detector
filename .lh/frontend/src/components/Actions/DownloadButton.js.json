{
    "sourceFile": "frontend/src/components/Actions/DownloadButton.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1762449721825,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1762449721825,
            "name": "Commit-0",
            "content": "import React, { useState } from 'react';\r\nimport jsPDF from 'jspdf';\r\nimport html2canvas from 'html2canvas';\r\n\r\nfunction DownloadButton({ targetId }) {\r\n  const [isDownloading, setIsDownloading] = useState(false);\r\n\r\n  const handleDownload = () => {\r\n    const input = document.getElementById(targetId);\r\n    if (!input) {\r\n      console.error(`Element with id '${targetId}' not found.`);\r\n      return;\r\n    }\r\n\r\n    setIsDownloading(true);\r\n\r\n    // Give a slight delay for any animations to finish\r\n    setTimeout(() => {\r\n      html2canvas(input, { \r\n        scale: 2, // Better quality\r\n        useCORS: true \r\n      })\r\n      .then((canvas) => {\r\n        const imgData = canvas.toDataURL('image/png');\r\n        \r\n        const pdf = new jsPDF('p', 'mm', 'a4');\r\n        const pdfWidth = pdf.internal.pageSize.getWidth();\r\n        const imgWidth = canvas.width;\r\n        const imgHeight = canvas.height;\r\n        const ratio = pdfWidth / imgWidth;\r\n        const scaledHeight = imgHeight * ratio;\r\n\r\n        pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, scaledHeight);\r\n        \r\n        // TODO: Handle content that is longer than one A4 page\r\n        // (This simple version will just cut it off)\r\n\r\n        pdf.save('Authintic-Report.pdf');\r\n        setIsDownloading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"Error generating PDF:\", err);\r\n        setIsDownloading(false);\r\n      });\r\n    }, 500); // 500ms delay\r\n  };\r\n\r\n  return (\r\n    <button \r\n      onClick={handleDownload} \r\n      disabled={isDownloading}\r\n      style={{\r\n        padding: '10px 20px',\r\n        fontSize: '1rem',\r\n        backgroundColor: '#28a745',\r\n        color: 'white',\r\n        border: 'none',\r\n        borderRadius: '5px',\r\n        cursor: 'pointer',\r\n        height: 'fit-content',\r\n        alignSelf: 'center'\r\n      }}\r\n    >\r\n      {isDownloading ? 'Downloading...' : 'Download PDF Report'}\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default DownloadButton;"
        }
    ]
}